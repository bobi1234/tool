<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bobi | 在线工具-二维码在线生成</title>
    <meta name="keywords" content="tool,bobi tool,bobi's tool,bobi-tool,在线工具,bobi在线工具,个人在线工具平台,bobi个人在线工具平台">
    <meta name="description" content="这是bobi的个人在线工具平台，主要提供有各种开发文档api，如JDK1.6中文文档及各种pdf书籍。也提供各种在线小工具，如vip在线影院、二维码生成及字母大小写转换等工具。">
    <meta name="viewport" content="width=device-width,initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link rel="shortcut icon" href="imgs/favicon.ico" type="image/x-icon"/>
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="http://apps.bdimg.com/libs/animate.css/3.1.0/animate.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.css">
    <style>
        body {
            background: url(imgs/bg.png) repeat;
        }

        .navbar {
            margin-bottom: 5px;
        }

        .rows-width {
            width: 100%;
        }

        .mtb15 {
            margin-top: 15px;
            margin-bottom: 15px;
        }

        #qrcodeImg {
            text-align: center;
        }
    </style>
</head>

<body>
<div class="container">
    <!--导航栏-->
    <div id="navbar"></div>
    <!--正文内容-->
    <textarea class="form-control rows-width" rows="6" id="from" placeholder="请输入内容"></textarea>
    <div class="row text-center mtb15">
        <div class="col-md-12">
            <button type="button" class="btn btn-success btn-block" onclick="qrcode()">转换为二维码</button>
        </div>
    </div>
    <div id="qrcodeImg"></div>
    <!--底部信息-->
    <div id="footer"></div>
</div>
<script src="https://cdn.bootcss.com/jquery/1.12.4/jquery.min.js"></script>
<script src="https://cdn.bootcss.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="http://apps.bdimg.com/libs/jquery-qrcode/1.0.0/jquery.qrcode.min.js"></script>
<script src="https://cdn.bootcss.com/sweetalert/2.1.0/sweetalert.min.js"></script>
<script src="https://cdn.bootcss.com/nprogress/0.2.0/nprogress.js"></script>
<script src="js/weather.js"></script>
<script src="js/nprogress.js"></script>
<script>
    // 引入公共页面
    $("#navbar").load("common/header.html");
    $("#footer").load("common/footer.html");

    /**
     * 在线转换为二维码
     */
    function qrcode() {
        var from = $("#from").val().trim();
        if (from == "") {
            sweetAlert("请输入内容！", "出错了！", "error");
            return;
        }
        $("#qrcodeImg").children("canvas").remove().removeClass("animated flip");
        $("#qrcodeImg").qrcode(utf16To8(from));
        $("#qrcodeImg").children("canvas").addClass("animated flip");
    }

    /**
     * 将UTF-16转换为UTF-8
     */
    function utf16To8(str) {
        var out, i, len, c;
        out = "";
        len = str.length;
        for (i = 0; i < len; i++) {
            c = str.charCodeAt(i);
            if ((c >= 0x0001) && (c <= 0x007F)) {
                out += str.charAt(i);
            } else if (c > 0x07FF) {
                out += String.fromCharCode(0xE0 | ((c >> 12) & 0x0F));
                out += String.fromCharCode(0x80 | ((c >> 6) & 0x3F));
                out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));
            } else {
                out += String.fromCharCode(0xC0 | ((c >> 6) & 0x1F));
                out += String.fromCharCode(0x80 | ((c >> 0) & 0x3F));
            }
        }
        return out;
    }
</script>
</body>
</html>
